Turbo Assembler	 Version 4.1	    02/23/25 17:57:08	    Page 1
test.asm



      1	      =B800		     video_segment   =	     0b800h
      2
      3	0000			     .model tiny
      4	0000			     .code
      5				     org 100h
      6	0100			     Start:
      7	0100  33 C0				     xor ax, ax
      8	0102  8E C0				     mov es, ax
      9	0104  BB 0024				     mov bx, 09h * 4
     10
     11	0107  26: 8B 07				     mov ax, es:[bx]
     12	010A  A3 0160r				     mov old09ofs, ax
     13	010D  26: 8B 47	02			     mov ax, es:[bx + 2]
     14	0111  A3 0162r				     mov old09seg, ax
     15
     16	0114  26: C7 07	0132r			     mov es:[bx], offset NewOS	     ;change 09h interrupt by mine
     17	0119  8C C8				     mov ax, cs					     ;ax = cs
     18	011B  26: 89 47	02			     mov es:[bx	+ 2], ax		     ;new segment
     19
     20	011F  CD 09				     int 09h					     ;call procedural interrupt	    +
     21				     handler (поп)
     22
     23	0121  B8 3100				     mov ax, 3100h			     ;31 functions 21 interrupt
     24	0124  BA 0164r				     mov dx, offset EOP
     25	0127  D1 EA D1 EA D1 EA	D1+		     shr dx, 4
     26	      EA
     27	012F  42				     inc dx
     28	0130  CD 21				     int 21h
     29
     30	0132			     NewOS   proc
     31	0132  50 53 51 52 06 56	55		     push ax bx	cx dx es si bp
     32
     33	0139  B8 B800				     mov ax, video_segment
     34	013C  8E C0				     mov es, ax
     35	013E  B4 4E				     mov ah, 4eh
     36
     37	0140  BB 0370				     mov bx, 5 * 80 * 2	+ 40 * 2
     38
     39	0143  E4 60				     in	al, 60h
     40	0145  26: 89 07				     mov es:[bx], ax
     41
     42	0148  E4 61				     in	al, 61h
     43	014A  8A E0				     mov ah, al
     44	014C  0C 80				     or	al, 80h
     45	014E  E6 61				     out 61h, al					     ;ready for	input next  +
     46				     button
     47	0150  8A C4				     mov al, ah
     48	0152  E6 61				     out 61h, al
     49
     50	0154  B0 20				     mov al, 20h					     ;non-specific end of   +
     51				     interrupt
     52	0156  E6 20				     out 20h, al					     ;interrupt	controller  +
     53				     port
     54
     55	0158  5D 5E 07 5A 59 5B	58		     pop bp si es dx cx	bx ax
     56	015F  EA					     db	0eah
     57	0160  0000		     old09ofs	     dw	0
Turbo Assembler	 Version 4.1	    02/23/25 17:57:08	    Page 2
test.asm



     58	0162  0000		     old09seg	     dw	0
     59	0164					     endp
     60
     61	0164			     EOP:
     62				     end	     Start
Turbo Assembler	 Version 4.1	    02/23/25 17:57:08	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/23/25"
??FILENAME			  Text	 "test	  "
??TIME				  Text	 "17:57:08"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 TEST
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
EOP				  Near	 DGROUP:0164
NEWOS				  Near	 DGROUP:0132
OLD09OFS			  Word	 DGROUP:0160
OLD09SEG			  Word	 DGROUP:0162
START				  Near	 DGROUP:0100
VIDEO_SEGMENT			  Number B800

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0164 Word	  Public  CODE
